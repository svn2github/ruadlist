#!/bin/bash
# update files before commiting changes back
svn update
# re-generate hashes
./hash.pl advblock.txt
./hash.pl antinuha.txt
./hash.pl bitblock.txt
./hash.pl cntblock.txt
# get diffs
svn diff advblock.txt
svn diff antinuha.txt
svn diff bitblock.txt
svn diff cntblock.txt
# check for common mistakes
echo -------------------------------------------------------------------------------
echo     "Fix-it before commit" auto-generated block. Use Ctrl+C to stop commit.
echo -------------------------------------------------------------------------------
grep '^[^/!].*\^[^$*=]' *.txt
echo -------------------------------------------------------------------------------
# ask for comments in separate window and commit
svn --editor-cmd "xterm -e nano" commit
# remove temporary files
if [ $? = 0 ]; then
	rm -rf svn-commit.*>&1|&1>&2
fi
rm -rf *~>&1|&1>&2
rm -rf *.save>&1|&1>&2

